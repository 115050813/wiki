<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>jMonkeyEngine 3 Tutorial (9) - Hello Collision</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>jMonkeyEngine 3 Tutorial (9) - Hello Collision</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Пример-Кода">Пример Кода</a></li>
<li><a href="#Понимание-Кода">Понимание Кода</a></li>
<li><a href="#Инициализация-игры">Инициализация игры</a>
<ul class="sectlevel2">
<li><a href="#the-physics-controlled-scene">The Physics-Controlled Scene</a></li>
<li><a href="#the-physics-controlled-player">The Physics-Controlled Player</a></li>
<li><a href="#physicsspace">PhysicsSpace</a></li>
</ul>
</li>
<li><a href="#navigation">Navigation</a>
<ul class="sectlevel2">
<li><a href="#1-inputmanager">1. inputManager</a></li>
<li><a href="#2-onaction">2. onAction()</a></li>
<li><a href="#3-setwalkdirection">3. setWalkDirection()</a></li>
</ul>
</li>
<li><a href="#Вывод">Вывод</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Предыдущий: <a href="документация/jme3_ru/начальная/знакомство_с_взаимодействиями.html">Знакомство с Взаимодействиями</a>,
Следующий:  <a href="документация/jme3_ru/начальная/знакомство_с_местностью.html">Знакомство с Местностью</a>
Английская версия: <a href="jme3/beginner/hello_collision.html">Hello Collision</a></p>
</div>
<div class="paragraph">
<p>В этом уроке показан способ как загрузите модель сцены и дать ей твердые стены и полы что бы персонаж мог ходить.
Вы используете <code>RigidBodyControl</code> для static collidable сцены, и <code>CharacterControl</code> для перемещения персонажем от первого лица.  Вы также узнаете, как настроить камеру от первого лица по умолчанию для перемещения при наличии физике.
Вы можете использовать решение, показанное здесь для шутеров от первого лица, бродилок, и подобных игр.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/jme3/beginner/beginner-scene.png" alt="beginner-scene.png" height="281">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Пример-Кода">Пример Кода</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Если у вас её еще нет, то загрузите пример сцены <a href="http://jmonkeyengine.googlecode.com/svn/trunk/engine/town.zip">town.zip</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>jMonkeyProjects$ ls -1 BasicGame
assets/
build.xml
town.zip
src/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Поместите town.zip в корневую папку вашего JME3 проекта. Вот код:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">jme3test.helloworld</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.asset.plugins.ZipLocator</span>;
<span class="keyword">import</span> <span class="include">com.jme3.bullet.BulletAppState</span>;
<span class="keyword">import</span> <span class="include">com.jme3.bullet.collision.shapes.CapsuleCollisionShape</span>;
<span class="keyword">import</span> <span class="include">com.jme3.bullet.collision.shapes.CollisionShape</span>;
<span class="keyword">import</span> <span class="include">com.jme3.bullet.control.CharacterControl</span>;
<span class="keyword">import</span> <span class="include">com.jme3.bullet.control.RigidBodyControl</span>;
<span class="keyword">import</span> <span class="include">com.jme3.bullet.util.CollisionShapeFactory</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.KeyInput</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.controls.ActionListener</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.controls.KeyTrigger</span>;
<span class="keyword">import</span> <span class="include">com.jme3.light.AmbientLight</span>;
<span class="keyword">import</span> <span class="include">com.jme3.light.DirectionalLight</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.ColorRGBA</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.Vector3f</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Node</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Spatial</span>;

<span class="comment">/**
 * Пример 9 - Как сделать стены и полы твердыми.
 * В этом коде для столкновений использует физику и пользовательские Action Listener.
 * @author normen, with edits by Zathras
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloCollision</span> <span class="directive">extends</span> SimpleApplication
        <span class="directive">implements</span> <span class="predefined-type">ActionListener</span> {

  <span class="directive">private</span> Spatial sceneModel;
  <span class="directive">private</span> BulletAppState bulletAppState;
  <span class="directive">private</span> RigidBodyControl landscape;
  <span class="directive">private</span> CharacterControl player;
  <span class="directive">private</span> Vector3f walkDirection = <span class="keyword">new</span> Vector3f();
  <span class="directive">private</span> <span class="type">boolean</span> left = <span class="predefined-constant">false</span>, right = <span class="predefined-constant">false</span>, up = <span class="predefined-constant">false</span>, down = <span class="predefined-constant">false</span>;

  <span class="comment">//Временные векторы, используемые на каждом кадре.</span>
  <span class="comment">//Они здесь, чтобы избежать instanciating новых векторов на каждом кадре</span>
  <span class="directive">private</span> Vector3f camDir = <span class="keyword">new</span> Vector3f();
  <span class="directive">private</span> Vector3f camLeft = <span class="keyword">new</span> Vector3f();

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
    HelloCollision app = <span class="keyword">new</span> HelloCollision();
    app.start();
  }

  <span class="directive">public</span> <span class="type">void</span> simpleInitApp() {
    <span class="comment">/** Настройка физики*/</span>
    bulletAppState = <span class="keyword">new</span> BulletAppState();
    stateManager.attach(bulletAppState);
    <span class="comment">//bulletAppState.getPhysicsSpace().enableDebug(assetManager);</span>

    <span class="comment">// Мы как и раньше используем летающую камеру для поворотов,</span>
    <span class="comment">// но теперь местоположение будет зависеть от физике</span>
    viewPort.setBackgroundColor(<span class="keyword">new</span> ColorRGBA(<span class="float">0.7f</span>, <span class="float">0.8f</span>, <span class="float">1f</span>, <span class="float">1f</span>));
    flyCam.setMoveSpeed(<span class="integer">100</span>);
    setUpKeys();
    setUpLight();

    <span class="comment">// Загрузим сцену из zip файла и отрегулируем её размер.</span>
    assetManager.registerLocator(<span class="string"><span class="delimiter">&quot;</span><span class="content">town.zip</span><span class="delimiter">&quot;</span></span>, ZipLocator.class);
    sceneModel = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">main.scene</span><span class="delimiter">&quot;</span></span>);
    sceneModel.setLocalScale(<span class="float">2f</span>);

    <span class="comment">// Создадим обнаружение столкновений для сцены, путем создания</span>
    <span class="comment">// составной collision shape и static RigidBodyControl с массой zero(ноль).</span>
    CollisionShape sceneShape =
            CollisionShapeFactory.createMeshShape((Node) sceneModel);
    landscape = <span class="keyword">new</span> RigidBodyControl(sceneShape, <span class="integer">0</span>);
    sceneModel.addControl(landscape);

    <span class="comment">// Создадим обнаружение столкновений для игрока, путем создания</span>
    <span class="comment">// капсулы collision shape и CharacterControl.</span>
    <span class="comment">// CharacterControl предлагает дополнительные настройки для</span>
    <span class="comment">// размера, высоты шага, прыжка, падения и силы тяжести.</span>
    <span class="comment">// Мы также поставим игрока в исходное положение.</span>
    CapsuleCollisionShape capsuleShape = <span class="keyword">new</span> CapsuleCollisionShape(<span class="float">1.5f</span>, <span class="float">6f</span>, <span class="integer">1</span>);
    player = <span class="keyword">new</span> CharacterControl(capsuleShape, <span class="float">0.05f</span>);
    player.setJumpSpeed(<span class="integer">20</span>);
    player.setFallSpeed(<span class="integer">30</span>);
    player.setGravity(<span class="integer">30</span>);
    player.setPhysicsLocation(<span class="keyword">new</span> Vector3f(<span class="integer">0</span>, <span class="integer">10</span>, <span class="integer">0</span>));

    <span class="comment">// Мы придаем сцене и игроку в RootNode физику пространства,</span>
    <span class="comment">// чтобы она появились в игровом мире.</span>
    rootNode.attachChild(sceneModel);
    bulletAppState.getPhysicsSpace().add(landscape);
    bulletAppState.getPhysicsSpace().add(player);
  }

  <span class="directive">private</span> <span class="type">void</span> setUpLight() {
    <span class="comment">// Мы добавим свет, что бы мы могли видеть сцену</span>
    AmbientLight al = <span class="keyword">new</span> AmbientLight();
    al.setColor(ColorRGBA.White.mult(<span class="float">1.3f</span>));
    rootNode.addLight(al);

    DirectionalLight dl = <span class="keyword">new</span> DirectionalLight();
    dl.setColor(ColorRGBA.White);
    dl.setDirection(<span class="keyword">new</span> Vector3f(<span class="float">2.8f</span>, -<span class="float">2.8f</span>, -<span class="float">2.8f</span>).normalizeLocal());
    rootNode.addLight(dl);
  }

  <span class="comment">/** Мы напишем навигационные клавиши здесь, что бы мы могли
   * иметь возможность управлять ходьбой и прыжками в игре: */</span>
  <span class="directive">private</span> <span class="type">void</span> setUpKeys() {
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_A));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Right</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_D));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Up</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_W));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Down</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_S));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jump</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_SPACE));
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Right</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Up</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Down</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Jump</span><span class="delimiter">&quot;</span></span>);
  }

  <span class="comment">/** Здесь наши пользовательские действия вызываются нажатием клавиш.
   * Мы еще не научились ходить, мы просто отслеживать направление, соответствующее
   * нажатой пользователем клавиши. */</span>
  <span class="directive">public</span> <span class="type">void</span> onAction(<span class="predefined-type">String</span> binding, <span class="type">boolean</span> isPressed, <span class="type">float</span> tpf) {
    <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span>)) {
      left = isPressed;
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Right</span><span class="delimiter">&quot;</span></span>)) {
      right= isPressed;
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Up</span><span class="delimiter">&quot;</span></span>)) {
      up = isPressed;
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Down</span><span class="delimiter">&quot;</span></span>)) {
      down = isPressed;
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jump</span><span class="delimiter">&quot;</span></span>)) {
      <span class="keyword">if</span> (isPressed) { player.jump(); }
    }
  }

  <span class="comment">/**
   * Это главный цикл обработки событий -- ходьба происходит здесь.
   * Мы проверяем, в каком направлении игрок идет путем интерпретации
   * направления камеры вперед (camDir) и в сторону (camLeft).
   * Команда setWalkDirection () это то, что позволяет физический управлять ходьбой игрока.
   * Также мы можем убедится здесь, что камера перемещается вместе с игроком.
   */</span>
  <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> simpleUpdate(<span class="type">float</span> tpf) {
        camDir.set(cam.getDirection()).multLocal(<span class="float">0.6f</span>);
        camLeft.set(cam.getLeft()).multLocal(<span class="float">0.4f</span>);
        walkDirection.set(<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>);
        <span class="keyword">if</span> (left) {
            walkDirection.addLocal(camLeft);
        }
        <span class="keyword">if</span> (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        <span class="keyword">if</span> (up) {
            walkDirection.addLocal(camDir);
        }
        <span class="keyword">if</span> (down) {
            walkDirection.addLocal(camDir.negate());
        }
        player.setWalkDirection(walkDirection);
        cam.setLocation(player.getPhysicsLocation());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Запустить пример. Вы должны увидеть городскую площадь с домами и памятник. Используйте клавиши WASD и мышь, чтобы перемещаться с видом от первого лица. Бегите вперед и прыгайте с помощью клавиши W и Пробел. Обратите внимание, как вы ступаете над тротуаром, и вверх по ступенькам к памятнику. Вы можете ходить в переулках между домами, и стены являются твердыми. Не заходите за край мира! emoji:smiley</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Понимание-Кода">Понимание Кода</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Начнем с объявления класса:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HelloCollision</span> <span class="directive">extends</span> SimpleApplication
        <span class="directive">implements</span> <span class="predefined-type">ActionListener</span> { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вы уже знаете, что SimpleApplication является базовым классом для всех jME3 игр. Вы реализуете в этом классе интерфейс ` ActionListener ` потому что вам нужно будет в дальнейшем настроить клавиши управления.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="directive">private</span> Spatial sceneModel;
  <span class="directive">private</span> BulletAppState bulletAppState;
  <span class="directive">private</span> RigidBodyControl landscape;
  <span class="directive">private</span> CharacterControl player;
  <span class="directive">private</span> Vector3f walkDirection = <span class="keyword">new</span> Vector3f();
  <span class="directive">private</span> <span class="type">boolean</span> left = <span class="predefined-constant">false</span>, right = <span class="predefined-constant">false</span>, up = <span class="predefined-constant">false</span>, down = <span class="predefined-constant">false</span>;

  <span class="comment">//Временные векторы, используемые на каждом кадре.</span>
  <span class="comment">//Они здесь для того, чтобы избежать instanciating новых векторов на каждый кадр</span>
  <span class="directive">private</span> Vector3f camDir = <span class="keyword">new</span> Vector3f();
  <span class="directive">private</span> Vector3f camLeft = <span class="keyword">new</span> Vector3f();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вы инициализировали несколько private полей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BulletAppState дает SimpleApplication доступ к функциям физики (например, для определения столкновений), поставляемой по jME3, jBullet интеграции</p>
</li>
<li>
<p>Spatial sceneModel предназначен для загрузке OgreXML модель города.</p>
</li>
<li>
<p>Вам нужен RigidBodyControl, чтобы придать модели города свойства твердого тела.</p>
</li>
<li>
<p>(Невидимый) от первого лица игрок представлен CharacterControl объектом.</p>
</li>
<li>
<p>Поле “walkDirection и четырех Booleans используются для управления движением.</p>
</li>
<li>
<p>camDir и camLeft временные векторы, используемые впоследствии при расчете walkingDirection для положения камеры(cam) и поворотов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Давайте посмотрим на все детали:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Инициализация-игры">Инициализация игры</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Как обычно, вы инициализируете игру в методе <code>simpleInitApp()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    viewPort.setBackgroundColor(<span class="keyword">new</span> ColorRGBA(<span class="float">0.7f</span>,<span class="float">0.8f</span>,<span class="float">1f</span>,<span class="float">1f</span>));
    flyCam.setMoveSpeed(<span class="integer">100</span>);
    setUpKeys();
    setUpLight();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Вы можете установить цвет фона светло-голубым, так как это сцена с небом.</p>
</li>
<li>
<p>Вы переназначите управление камерой по умолчанию на “flyCam, камера от первого лица, и установить её скорость.</p>
</li>
<li>
<p>Вспомогательный метод <code>setUpLights()</code> добавляет источники света.</p>
</li>
<li>
<p>Вспомогательный метод <code>setUpKeys()</code> настраивает привязки ввода–мы рассмотрим его позже.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="the-physics-controlled-scene">The Physics-Controlled Scene</h3>
<div class="paragraph">
<p>Первое, что вы создаете для каждый игровой физики является объект BulletAppState. Это дает вам доступ к jME3, jBullet интеграции, которая обрабатывает физические силы и столкновения.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    bulletAppState = <span class="keyword">new</span> BulletAppState();
    stateManager.attach(bulletAppState);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для сцены, вы загрузить “sceneModel из zip-файл, и измените Размер.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    assetManager.registerLocator(<span class="string"><span class="delimiter">&quot;</span><span class="content">town.zip</span><span class="delimiter">&quot;</span></span>, ZipLocator.class);
    sceneModel = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">main.scene</span><span class="delimiter">&quot;</span></span>);
    sceneModel.setLocalScale(<span class="float">2f</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Файл “town.zip входит в качестве образца модели в JME3 ресурс-вы можете<a href="http://jmonkeyengine.googlecode.com/svn/trunk/engine/town.zip">загрузить отсюда</a>. (При желании, можно использовать любую OgreXML сцену из ваших собственных.) Для этого примера, поместите zip файл, в папку верхнего уровня приложения (то есть рядом src/, assets/, build.xml).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    CollisionShape sceneShape =
      CollisionShapeFactory.createMeshShape((Node) sceneModel);
    landscape = <span class="keyword">new</span> RigidBodyControl(sceneShape, <span class="integer">0</span>);
    sceneModel.addControl(landscape);
    rootNode.attachChild(sceneModel);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Чтобы использовать обнаружение столкновений, вы добавляете RigidBodyControl к Spatial <code>sceneModel</code>. RigidBodyControl для комплексной модели принимает два аргумента: Столкновение(Collision) форма(Shape), и масса объекта.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JME3 предлагает <code>CollisionShapeFactory</code> что precalculates сеточно-точные столкновения формы для Spatial. Вы можете выбрать для создания <code>CompoundCollisionShape</code> (который имеет MeshCollisionShapes как его потомок) потому что этот тип столкновения форм является оптимальным для неподвижных объектов, таких как рельеф местности, дома, и целых уровней шутеров.</p>
</li>
<li>
<p>Набор массы до нуля, поскольку сцена статична, и ее масса irrevelant.</p>
</li>
<li>
<p>Добавить элемент управления в Spatial это даст ему физические свойства.</p>
</li>
<li>
<p>Как всегда, прикрепите sceneModel к rootNode, чтобы сделать его видимым.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Совет:</strong> Помните, что нужно добавить источник света, чтобы видеть сцену.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-physics-controlled-player">The Physics-Controlled Player</h3>
<div class="paragraph">
<p>От первого лица игрок, как правило, невидим. При использовании по умолчанию flyCam от первого лица, камера даже не проверится на столкновения она свободно проходит сквозь стены. Это потому, что flyCam не назначена никакая физическая форма. В этом примере кода, вы представляете игрока от первого лица как(невидимую) физическую форму. Вы можете использовать клавиши WASD, чтобы управлять этой физической формы, в то время как физический движок управляет для вас, как она ходит вдоль сплошной стены и твердых полов и перепрыгивает через твердые препятствия. Тогда вам просто остатся заставить камеру следовать за Ходячие фигурой – и вы получите иллюзию твердого физического тела видящего через камеру.</p>
</div>
<div class="paragraph">
<p>Давайте создадим обнаружение столкновений для игрока от первого лица.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    CapsuleCollisionShape capsuleShape = <span class="keyword">new</span> CapsuleCollisionShape(<span class="float">1.5f</span>, <span class="float">6f</span>, <span class="integer">1</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Опять же, вы создаете CollisionShape: На этот раз вы выбираете CapsuleCollisionShape, цилиндр закругленный сверху и снизу. Эта форма является оптимальной для человека: Она высокая и округлая помогает реже застрять на препятствиях.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Поставьте CapsuleCollisionShape конструктор с желаемым радиусом и высотой ограничивающей капсулу, чтобы соответствовать форме вашего персонажа. В этом примере персоонаж 2*1.5 f единиц в ширину, и 6f единиц в высоту.</p>
</li>
<li>
<p>Окончательный целочисленный аргумент задает ориентацию цилиндра: 1 - ось Y, которая подходит для порядочного человека. Для животных, которые являются более высокими можно использовать 0 или 2 (в зависимости от того, как она поворачивается).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    player = <span class="keyword">new</span> CharacterControl(capsuleShape, <span class="float">0.05f</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>“</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">bulletAppState.getPhysicsSpace().enableDebug(assetManager);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь вы используете CollisionShape создать <code>CharacterControl</code> который представляет игрока от первого лица. Последний аргумент конструктора CharacterControl (здесь ` .05f `) является размер шага, который персонаж должен сделать.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    player.setJumpSpeed(<span class="integer">20</span>);
    player.setFallSpeed(<span class="integer">30</span>);
    player.setGravity(<span class="integer">30</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Помимо высоты шага и размера персонажа, <code>CharacterControl</code> позволяет настроить прыжки, падения и скорости гравитации. Отрегулируйте значения, чтобы соответствовать вашему игровой ситуации.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    player.setPhysicsLocation(<span class="keyword">new</span> Vector3f(<span class="integer">0</span>, <span class="integer">10</span>, <span class="integer">0</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наконец мы ставим игрока в исходное положение и обновить его состояние – не забывайте использовать <code>setPhysicsLocation()</code> теперь вместо <code>setLocalTranslation()</code>, поскольку вы имеете дело с физическим объектом.</p>
</div>
</div>
<div class="sect2">
<h3 id="physicsspace">PhysicsSpace</h3>
<div class="paragraph">
<p>Помните, для физики игры, вы должны зарегистрироваться все твердые предметы (как правило, персонажи и сцены) PhysicsSpace!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    bulletAppState.getPhysicsSpace().add(landscape);
    bulletAppState.getPhysicsSpace().add(player);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Невидимым тело персонажа просто сидит там на физическом полу. Оно еще не может ходить – вы будете иметь дело с этим в далее.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="navigation">Navigation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>По умолчанию camera controller <code>cam</code> от третьего лица. JME3 также предлагает first-person controller, <code>flyCam</code>, который мы используем здесь, чтобы обрабатывать вращение камеры. На <code>flyCam</code> управления перемещает камеру с помощью метода <code>setLocation()</code>.</p>
</div>
<div class="paragraph">
<p>Однако, вы должны заново определить, как ходьба (движение камеры) обрабатывается по physics-controlled объектов:  При переходе в не-физическом узле (например, по умолчанию flyCam), вы просто укажите <em>target location</em>. Не существует тестов, которые непозволят flyCam от застрять в стене!  При перемещении необходимо указать PhysicsControl, вместо <em>walk direction</em> . Затем можно вычислить PhysicsSpace насколько ваш персонаж может фактически двигаться в нужном направлении – или мешает ли ему препятствие двигаться дальше.</p>
</div>
<div class="paragraph">
<p>Короче говоря, вы должны заново определить flyCam navigational key mappings для использования <code>setWalkDirection()</code> вместо <code>setLocalTranslation()</code>. Вот шаги:</p>
</div>
<div class="sect2">
<h3 id="1-inputmanager">1. inputManager</h3>
<div class="paragraph">
<p>В методе <code>simpleInitApp()</code> вы заново настроить привычные WASD входы для прогулок, и пробел для прыжков.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> setUpKeys() {
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_A));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Right</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_D));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Up</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_W));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Down</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_S));
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jump</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_SPACE));
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Right</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Up</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Down</span><span class="delimiter">&quot;</span></span>);
    inputManager.addListener(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Jump</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вы можете переместить этот блок кода в созданный вспомогательный метод <code>setupKeys()</code> и вызывать этот метод из <code>simpleInitApp()</code>– чтобы код был более читабельный.</p>
</div>
</div>
<div class="sect2">
<h3 id="2-onaction">2. onAction()</h3>
<div class="paragraph">
<p>Помните, что этот класс реализует интерфейс <code>ActionListener</code> так что вы можете настроить входы flyCam. Интерфейс <code>ActionListener</code> необходимо реализовать  в методе <code>onAction()</code>: Вы повторно определить действия, запускаемые навигационными клавишами для работы с физикой.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="directive">public</span> <span class="type">void</span> onAction(<span class="predefined-type">String</span> binding, <span class="type">boolean</span> value, <span class="type">float</span> tpf) {
    <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span>)) {
      <span class="keyword">if</span> (value) { left = <span class="predefined-constant">true</span>; } <span class="keyword">else</span> { left = <span class="predefined-constant">false</span>; }
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Right</span><span class="delimiter">&quot;</span></span>)) {
      <span class="keyword">if</span> (value) { right = <span class="predefined-constant">true</span>; } <span class="keyword">else</span> { right = <span class="predefined-constant">false</span>; }
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Up</span><span class="delimiter">&quot;</span></span>)) {
      <span class="keyword">if</span> (value) { up = <span class="predefined-constant">true</span>; } <span class="keyword">else</span> { up = <span class="predefined-constant">false</span>; }
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Down</span><span class="delimiter">&quot;</span></span>)) {
      <span class="keyword">if</span> (value) { down = <span class="predefined-constant">true</span>; } <span class="keyword">else</span> { down = <span class="predefined-constant">false</span>; }
    } <span class="keyword">else</span> <span class="keyword">if</span> (binding.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jump</span><span class="delimiter">&quot;</span></span>)) {
      player.jump();
    }
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Единственное движение, которое вы не должны выполнять сами это действие прыжок. Вызов <code>player.jump()</code> это специальный метод, который обрабатывает правильно движения прыгать для <code>PhysicsCharacterNode</code>.</p>
</div>
<div class="paragraph">
<p>На все другие направления: каждый раз, когда пользователь нажимает одну из клавиш WASD, вы <em>отслеживаете</em>  направление, в котором пользователь хочет идти, храня эту информацию в четырех directional Booleans. Нет фактическая ходьба здесь не происходит пока. Цикл обновления это то, что выполняет действие из информации направления хранимой в booleans переменных, и заставляет игрока двигаться, как показано в следующем фрагменте кода:</p>
</div>
</div>
<div class="sect2">
<h3 id="3-setwalkdirection">3. setWalkDirection()</h3>
<div class="paragraph">
<p>Ранее в методе <code>onAction()</code> вы собрали информацию, в какую сторону пользователь хочет зайти в терминах “forward или “left.  В цикл обновления, вы неоднократно определяли текущий угол поворота камеры. Вы рассчитать фактические векторы, которые “forward или “left соответствует системе координат.</p>
</div>
<div class="paragraph">
<p>Этот последний и самый важный фрагмент кода переходит в метод <code>simpleUpdate()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="directive">public</span> <span class="type">void</span> simpleUpdate(<span class="type">float</span> tpf) {
        camDir.set(cam.getDirection()).multLocal(<span class="float">0.6f</span>);
        camLeft.set(cam.getLeft()).multLocal(<span class="float">0.4f</span>);
        walkDirection.set(<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>);
        <span class="keyword">if</span> (left) {
            walkDirection.addLocal(camLeft);
        }
        <span class="keyword">if</span> (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        <span class="keyword">if</span> (up) {
            walkDirection.addLocal(camDir);
        }
        <span class="keyword">if</span> (down) {
            walkDirection.addLocal(camDir.negate());
        }
        player.setWalkDirection(walkDirection);
        cam.setLocation(player.getPhysicsLocation());
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Это, как ходьба срабатывает:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Инициализировать вектор <code>walkDirection</code> к нулю. Это-то, где вы хотите хранить вычисляемые  направления ходьбы.</p>
</li>
<li>
<p>Добавить <code>walkDirection</code> последние векторы движения, которые вами определены из камеры. Таким образом, для персонажа, стало возможным  например двигаться вперед и влево одновременно!</p>
</li>
<li>
<p>Это одна последняя строка означает “магия ходьбы :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>player.setWalkDirection(walkDirection);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Всегда используйте `setWalkDirection()` что бы сделать объект physics-controlled что бы двигаться непрерывно, и физический движок обрабатывал обнаружение столкновений для вас.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сделайте так что бы  объект camera от первого лица, следовала вместе с physics-controlled игрока:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cam.setLocation(player.getPhysicsLocation());</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Важно:</strong> Опять же, не используйте <code>setLocalTranslation()</code> что бы ходить вокруг игрока. Вы получите что его заклините в преграждающих других физических объектах. Вы можете поставить игрока в исходное положение с <code>setPhysicalLocation()</code> если вы убедитесь что поместили его чуть выше пола и на удалении от препятствий.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Вывод">Вывод</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Вы узнали, как загрузить “твердых физическая модель сцены и ходить в них от первого лица.
Вы узнали как ускорять физических вычислений с помощью CollisionShapeFactory для создания эффективной CollisionShapes для сложных Геометрий. Вы знаете, как добавить PhysicsControls вашему collidable geometries геометрии и регистрации их в PhysicsSpace. Вы также научились использовать <code>player.setWalkDirection(walkDirection)</code> to move collision-aware characters around, and not <code>setLocalTranslation()</code>.</p>
</div>
<div class="paragraph">
<p>Ландшафт это другой тип сцены, в которой вам тоже нужно будет ходить. Давайте продолжать обучение <a href="документация/jme3_ru/начальная/знакомство_с_местностью.html">Как создавать холмистый пейзаж</a> сейчас.</p>
</div>
<hr>
<div class="paragraph">
<p>Связанная информация:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Как загружать модели и сцены: <a href="документация/jme3_ru/начальная/знакомство_с_ресурсами.html">Знакомство с Ресурсами</a>, <a href="sdk/scene_explorer.html">Scene Explorer</a>, <a href="sdk/scene_composer.html">Scene Composer</a></p>
</li>
<li>
<p><a href="jme3/advanced/terrain_collision.html">Terrain Collision</a></p>
</li>
<li>
<p>Чтобы узнать больше о сложных физических сценах, где несколько мобильных физических объектов сталкиваются друг с другом, читать <a href="jme3/beginner/hello_physics.html">Hello Physics</a>.</p>
</li>
<li>
<p>FYI, есть более простые решения обнаружения столкновений тоже без физики. Посмотрите на <a href="http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/test/jme3test/collision/TestTriangleCollision.java">jme3test.collision.TestTriangleCollision.java</a>.
&lt;tags&gt;&lt;tag target="beginner" /&gt;&lt;tag target="collision" /&gt;&lt;tag target="control" /&gt;&lt;tag target="intro" /&gt;&lt;tag target="documentation" /&gt;&lt;tag target="model" /&gt;&lt;tag target="physics" /&gt;&lt;/tags&gt;</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-05-21 23:55:13 UTC
</div>
</div>
</body>
</html>